# 时间戳在1986-1991发生了什么
---
## 问题：
```
Mac下，我在北京，竟然时间有时候按照GMT+0900处理。  
window下测试不存在该问题。
```
### 为什么
---
如下效果:  
new Date(new Date('1986-05-04 00:00:00').getTime())  
Sun May 04 1986 01:00:00 `GMT+0900 (CDT)`

而大多数时候效果是这样的：  
new Date()  
Thu Sep 10 2015 18:23:43 `GMT+0800 (CST)`

理想中，我们一直希望得到后一种情况，可是为什么会出现前一种情况呢？  
为什么有些时间段是按照GMT+0800处理，有些却按照GMT+0900处理？

## 原因
---
```
1986年至1991年，中华人民共和国在全国范围实行了六年夏时制，每年从4月中旬的第一个星期日2时整（北京时间）到9月中旬第一个星期日的凌晨2时整（北京夏令时）。除1986年因是实行夏时制的第一年，从5月4日开始到9月14日结束外，其它年份均按规定的时段施行。由于省电效果不抵需要适应时间的弊端，1992年4月5日后不再实行；
```
来源见这里[中国时区]
其实就是这个原因，Mac真心做得很好。

### 验证
---
开始时间：1986-05-04
结束时间：1991-09-14(9月中旬第一个星期日的凌晨2时整（北京夏令时）)
#### 验证一
---
new Date(new Date('1986-05-03 00:00:00').getTime())  
Sat May 03 1986 00:00:00 `GMT+0800 (CST)`

new Date(new Date('1986-05-04 00:00:00').getTime())  
Sun May 04 1986 01:00:00 `GMT+0900 (CDT)`

#### 验证二
---
new Date(new Date('1991-09-14 00:00:00').getTime())  
Sat Sep 14 1991 00:00:00 `GMT+0900 (CDT)`

new Date(new Date('1991-09-15 00:00:00').getTime())  
Sun Sep 15 1991 00:00:00 `GMT+0800 (CST)`

#### 验证三
---
是否从2时开始，如果从2时开始，到2时结束：  
new Date(new Date('1986-05-04 00:00:01').getTime())  
Sun May 04 1986 01:00:01 `GMT+0900 (CDT)`

new Date(new Date('1986-05-04 01:00:00').getTime())  
Sun May 04 1986 01:00:00 `GMT+0900 (CDT)`

new Date(new Date('1991-09-14 03:00:00').getTime())  
Sat Sep 14 1991 03:00:00 `GMT+0900 (CDT)`  

new Date(new Date('1991-09-14 23:59:59').getTime())  
Sat Sep 14 1991 23:59:59 `GMT+0900 (CDT)`
从上面测试数据发现，看来mac是按天为单位，而不是以实际小时为单位。


### 结论
---
由于当时中国国情决定，这个时间段`开始时间：1986-05-04，结束时间：1991-09-14`的时间被`拨快1小时`。所以会存在`GMT+0900（CDT）`。

### 方案
---
由于人们都是按照当时习惯处理，所以建议按照当下时区处理。
1、如果需要统一使用GMT+0800处理，直接使用[moment]处理即可：
```javascript
moment(525801600000).zone('+0800').format('YYYY-MM-DD HH:mm:ss');
```
2、当然可以通过动态获取时区处理： 
```javascript
(new Date()).getTimezoneOffset() / 60
-8
```
3、当然还可以通过转换为UTC或者GMT时间格式处理。



[中国时区]:https://zh.wikipedia.org/wiki/%E4%B8%AD%E5%9C%8B%E6%99%82%E5%8D%80
[moment]:http://momentjs.cn/
